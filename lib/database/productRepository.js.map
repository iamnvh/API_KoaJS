{"version":3,"file":"productRepository.js","names":["data","products","require","list","filter","name","item","sort","sortBy","reverse","limit","slice","parseInt","add","productList","id","length","result","price","description","color","createdAt","image","updatedProducts","fs","writeFile","JSON","stringify","err","console","log","update","isExist","product","map","remove","find"],"sources":["../../src/database/productRepository.js"],"sourcesContent":["import fs from \"fs\";\r\nimport sortBy from \"../untils/sortBy\";\r\nlet {data: products} = require('./products.json')\r\n\r\nexport function list(filter = {}) {\r\n  if (filter.name) {\r\n    products = products.filter((item) => item.name === filter.name);\r\n  }\r\n  if (filter.sort) {\r\n    if (filter.sort == \"desc\") {\r\n      products = sortBy(products, \"createdAt\").reverse();\r\n    }\r\n    if (filter.sort == \"asc\") {\r\n      products = sortBy(products, \"createdAt\");\r\n    }\r\n  }\r\n  if (filter.limit) {\r\n    products = products.slice(0, parseInt(filter.limit));\r\n  }\r\n\r\n  return products;\r\n}\r\n\r\nexport function add(data) {\r\n  const productList = sortBy(products, \"id\");\r\n  const id = productList[productList.length - 1].id + 1;\r\n  const result = {\r\n    id: id,\r\n    name: data.name,\r\n    price: data.price,\r\n    description: data.description,\r\n    color: data.color,\r\n    createdAt: data.createdAt,\r\n    image: data.image,\r\n  };\r\n  const updatedProducts = [...products, result];\r\n  fs.writeFile(\r\n    \"./src/database/products.json\",\r\n    JSON.stringify({\r\n      data: updatedProducts,\r\n    }),\r\n    (err,data) => {\r\n      if (err) {\r\n        console.log(err);\r\n      }\r\n      return data;\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport function update(data, id) {\r\n  const isExist = products.filter((product) => product.id == id);\r\n  if (isExist.length === 0) {\r\n    return false;\r\n  }\r\n  const result = products.map((product) => {\r\n    if (product.id === id) {\r\n      return {\r\n        ...product,\r\n        ...data,\r\n      };\r\n    }\r\n    return product;\r\n  });\r\n  const updatedProducts = result;\r\n  return fs.writeFile(\r\n    \"./src/database/products.json\",\r\n    JSON.stringify({\r\n      data: updatedProducts,\r\n    }),\r\n    (err) => {\r\n      if (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  );\r\n}\r\nexport function remove(id) {\r\n  const isExist = products.filter((product) => product.id === id);\r\n  if (isExist.length === 0) {\r\n    return false;\r\n  }\r\n  const data = products.filter((product) => {\r\n    return product.id !== id;\r\n  });\r\n  return fs.writeFile(\r\n    \"./src/database/products.json\",\r\n    JSON.stringify({\r\n      data: data,\r\n    }),\r\n    (err) => {\r\n      if (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  );\r\n}\r\n\r\nexport function find(id) {\r\n  return products.find((product) => product.id == id);\r\n}\r\n"],"mappings":"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"}